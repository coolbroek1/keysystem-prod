<!doctype html><meta charset="utf-8">
<style>
  body{margin:0;display:grid;place-items:center;height:100vh;background:#0b1220;color:#e8ecf4;font-family:system-ui,Arial}
  .msg{padding:12px 16px;border-radius:10px;background:#3b1e1e;color:#ffbdbd}
</style>
<script>
(async function(){
  try{
    const u = new URL(location.href);
    const hash = u.searchParams.get('hash') || '';                 // not required now
    const hwid = u.searchParams.get('hwid') || localStorage.getItem('hwid') || '';
    const ref  = document.referrer || '';

    const r = await fetch('/.netlify/functions/lv-verify', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ step:'2', hash, hwid, ref })
    });
    const d = await r.json();

    if (d && d.ok){
      localStorage.setItem('lv2','1');
      const qs = []; if(hwid) qs.push('hwid='+encodeURIComponent(hwid)); qs.push('lv=2');
      location.replace('/' + (qs.length?('?'+qs.join('&')):''));
    } else {
      localStorage.removeItem('lv2');
      document.body.innerHTML = '<div class="msg">Bypass detected. Please complete Linkvertise normally.</div>';
      setTimeout(()=>location.replace('/'), 1500);
    }
  }catch(e){
    location.replace('/');
  }
})();
</script>
<body>Verifying step 2â€¦</body>
